-- OPERAÇÕES CONTEMPLADAS PELO CASO DE TESTE:
-- (COM ARQUIVO DE CLIENTES)
-- CADASTRO DE CLIENTES
-- REMOÇÃO DE CLIENTE
-- DEPÓSITO E SAQUE
-- BUSCAR CLIENTE POR CPF
-- LIBERAR ESPAÇO
-- IMPRIMIR ARQUIVO DE CLIENTES
-- IMPRIMIR ÍNDICE DE CLIENTES

\echo file ARQUIVO_CLIENTES
64681295655;Maria Eugenia;12/04/1980;mariaeugenia@gmail.com;15998765645;0000000000.00;;#########################################################################################################################################################################02677449273;Gabriel Augusto;04/05/1997;ga.augusto@gmail.com;15997675654;0000000000.00;;#########################################################################################################################################################################79519734993;Geovana Santana;25/10/1994;ge.santana@gmail.com;16996543652;0000000000.00;;#########################################################################################################################################################################33197347759;Gustavo Almeida;19/11/1992;galmeida@gmail.com;14998786754;0000000000.00;;###########################################################################################################################################################################37567876542;Melissa Santos;13/04/1977;melissa@gmail.com;15998765435;0000000000.00;;#############################################################################################################################################################################14565436782;Melissa Pereira;19/09/1993;melissa@gmail.com;15997654738;0000000000.00;;############################################################################################################################################################################23465784759;Jose Santos;03/07/1968;josesantos@gmail.com;14998786754;0000000000.00;;#############################################################################################################################################################################
\echo index clientes_idx
[0] {79519734993, 0002}
[1] {33197347759, 0003}
[2] {37567876542, 0004}
[3] {14565436782, 0005}
[4] {23465784759, 0006}
[5]
[6]
[7]
[8]
[9] {64681295655, 0000}
[10] {02677449273, 0001}

-- removendo cliente D
DELETE FROM clientes WHERE cpf = '33197347759';
OK
\echo file ARQUIVO_CLIENTES
64681295655;Maria Eugenia;12/04/1980;mariaeugenia@gmail.com;15998765645;0000000000.00;;#########################################################################################################################################################################02677449273;Gabriel Augusto;04/05/1997;ga.augusto@gmail.com;15997675654;0000000000.00;;#########################################################################################################################################################################79519734993;Geovana Santana;25/10/1994;ge.santana@gmail.com;16996543652;0000000000.00;;#########################################################################################################################################################################*|197347759;Gustavo Almeida;19/11/1992;galmeida@gmail.com;14998786754;0000000000.00;;###########################################################################################################################################################################37567876542;Melissa Santos;13/04/1977;melissa@gmail.com;15998765435;0000000000.00;;#############################################################################################################################################################################14565436782;Melissa Pereira;19/09/1993;melissa@gmail.com;15997654738;0000000000.00;;############################################################################################################################################################################23465784759;Jose Santos;03/07/1968;josesantos@gmail.com;14998786754;0000000000.00;;#############################################################################################################################################################################
\echo index clientes_idx
[0] {79519734993, 0002}
[1] {DELETED}
[2] {37567876542, 0004}
[3] {14565436782, 0005}
[4] {23465784759, 0006}
[5]
[6]
[7]
[8]
[9] {64681295655, 0000}
[10] {02677449273, 0001}

-- depósito para o cliente B
UPDATE clientes SET saldo = saldo + 18 WHERE cpf = '23465784759';
OK
\echo file ARQUIVO_CLIENTES
64681295655;Maria Eugenia;12/04/1980;mariaeugenia@gmail.com;15998765645;0000000000.00;;#########################################################################################################################################################################02677449273;Gabriel Augusto;04/05/1997;ga.augusto@gmail.com;15997675654;0000000000.00;;#########################################################################################################################################################################79519734993;Geovana Santana;25/10/1994;ge.santana@gmail.com;16996543652;0000000000.00;;#########################################################################################################################################################################*|197347759;Gustavo Almeida;19/11/1992;galmeida@gmail.com;14998786754;0000000000.00;;###########################################################################################################################################################################37567876542;Melissa Santos;13/04/1977;melissa@gmail.com;15998765435;0000000000.00;;#############################################################################################################################################################################14565436782;Melissa Pereira;19/09/1993;melissa@gmail.com;15997654738;0000000000.00;;############################################################################################################################################################################23465784759;Jose Santos;03/07/1968;josesantos@gmail.com;14998786754;0000000018.00;;#############################################################################################################################################################################

-- buscando cliente inexistente
SELECT * FROM clientes WHERE cpf = '95229543178';
Indices percorridos: 9 10 0 1 2 3 4 5
ERRO: Registro nao encontrado

-- cadastrando cliente G no lugar do cliente A removido
INSERT INTO clientes VALUES ('95229543178', 'Roberta Lima', '17/04/1991', 'roberta91@gmail.com', '11978876623');
OK
\echo file ARQUIVO_CLIENTES
64681295655;Maria Eugenia;12/04/1980;mariaeugenia@gmail.com;15998765645;0000000000.00;;#########################################################################################################################################################################02677449273;Gabriel Augusto;04/05/1997;ga.augusto@gmail.com;15997675654;0000000000.00;;#########################################################################################################################################################################79519734993;Geovana Santana;25/10/1994;ge.santana@gmail.com;16996543652;0000000000.00;;#########################################################################################################################################################################*|197347759;Gustavo Almeida;19/11/1992;galmeida@gmail.com;14998786754;0000000000.00;;###########################################################################################################################################################################37567876542;Melissa Santos;13/04/1977;melissa@gmail.com;15998765435;0000000000.00;;#############################################################################################################################################################################14565436782;Melissa Pereira;19/09/1993;melissa@gmail.com;15997654738;0000000000.00;;############################################################################################################################################################################23465784759;Jose Santos;03/07/1968;josesantos@gmail.com;14998786754;0000000018.00;;#############################################################################################################################################################################95229543178;Roberta Lima;17/04/1991;roberta91@gmail.com;11978876623;0000000000.00;;#############################################################################################################################################################################
\echo index clientes_idx
[0] {79519734993, 0002}
[1] {95229543178, 0007}
[2] {37567876542, 0004}
[3] {14565436782, 0005}
[4] {23465784759, 0006}
[5]
[6]
[7]
[8]
[9] {64681295655, 0000}
[10] {02677449273, 0001}

-- buscando cliente G
SELECT * FROM clientes WHERE cpf = '95229543178';
Indices percorridos: 9 10 0 1
95229543178, Roberta Lima, 17/04/1991, roberta91@gmail.com, 11978876623, 0.00, {}

-- depósito para o cliente G
UPDATE clientes SET saldo = saldo + 18 WHERE cpf = '95229543178';
OK
\echo file ARQUIVO_CLIENTES
64681295655;Maria Eugenia;12/04/1980;mariaeugenia@gmail.com;15998765645;0000000000.00;;#########################################################################################################################################################################02677449273;Gabriel Augusto;04/05/1997;ga.augusto@gmail.com;15997675654;0000000000.00;;#########################################################################################################################################################################79519734993;Geovana Santana;25/10/1994;ge.santana@gmail.com;16996543652;0000000000.00;;#########################################################################################################################################################################*|197347759;Gustavo Almeida;19/11/1992;galmeida@gmail.com;14998786754;0000000000.00;;###########################################################################################################################################################################37567876542;Melissa Santos;13/04/1977;melissa@gmail.com;15998765435;0000000000.00;;#############################################################################################################################################################################14565436782;Melissa Pereira;19/09/1993;melissa@gmail.com;15997654738;0000000000.00;;############################################################################################################################################################################23465784759;Jose Santos;03/07/1968;josesantos@gmail.com;14998786754;0000000018.00;;#############################################################################################################################################################################95229543178;Roberta Lima;17/04/1991;roberta91@gmail.com;11978876623;0000000018.00;;#############################################################################################################################################################################

-- cadastrando cliente H (causa o redimensionamento da tabela hash)
INSERT INTO clientes VALUES ('44578690876', 'Melissa Pereira', '19/09/1993', 'melissa@gmail.com', '15997654738');
OK
\echo file ARQUIVO_CLIENTES
64681295655;Maria Eugenia;12/04/1980;mariaeugenia@gmail.com;15998765645;0000000000.00;;#########################################################################################################################################################################02677449273;Gabriel Augusto;04/05/1997;ga.augusto@gmail.com;15997675654;0000000000.00;;#########################################################################################################################################################################79519734993;Geovana Santana;25/10/1994;ge.santana@gmail.com;16996543652;0000000000.00;;#########################################################################################################################################################################*|197347759;Gustavo Almeida;19/11/1992;galmeida@gmail.com;14998786754;0000000000.00;;###########################################################################################################################################################################37567876542;Melissa Santos;13/04/1977;melissa@gmail.com;15998765435;0000000000.00;;#############################################################################################################################################################################14565436782;Melissa Pereira;19/09/1993;melissa@gmail.com;15997654738;0000000000.00;;############################################################################################################################################################################23465784759;Jose Santos;03/07/1968;josesantos@gmail.com;14998786754;0000000018.00;;#############################################################################################################################################################################95229543178;Roberta Lima;17/04/1991;roberta91@gmail.com;11978876623;0000000018.00;;#############################################################################################################################################################################44578690876;Melissa Pereira;19/09/1993;melissa@gmail.com;15997654738;0000000000.00;;############################################################################################################################################################################
\echo index clientes_idx
[0] {14565436782, 0005}
[1]
[2]
[3]
[4]
[5] {23465784759, 0006}
[6]
[7]
[8]
[9] {79519734993, 0002}
[10]
[11] {44578690876, 0008}
[12]
[13]
[14]
[15]
[16]
[17]
[18]
[19] {64681295655, 0000}
[20] {37567876542, 0004}
[21] {95229543178, 0007}
[22] {02677449273, 0001}

-- removendo inexistente
DELETE FROM clientes WHERE cpf = '44567898765';
ERRO: Registro nao encontrado
\echo file ARQUIVO_CLIENTES
64681295655;Maria Eugenia;12/04/1980;mariaeugenia@gmail.com;15998765645;0000000000.00;;#########################################################################################################################################################################02677449273;Gabriel Augusto;04/05/1997;ga.augusto@gmail.com;15997675654;0000000000.00;;#########################################################################################################################################################################79519734993;Geovana Santana;25/10/1994;ge.santana@gmail.com;16996543652;0000000000.00;;#########################################################################################################################################################################*|197347759;Gustavo Almeida;19/11/1992;galmeida@gmail.com;14998786754;0000000000.00;;###########################################################################################################################################################################37567876542;Melissa Santos;13/04/1977;melissa@gmail.com;15998765435;0000000000.00;;#############################################################################################################################################################################14565436782;Melissa Pereira;19/09/1993;melissa@gmail.com;15997654738;0000000000.00;;############################################################################################################################################################################23465784759;Jose Santos;03/07/1968;josesantos@gmail.com;14998786754;0000000018.00;;#############################################################################################################################################################################95229543178;Roberta Lima;17/04/1991;roberta91@gmail.com;11978876623;0000000018.00;;#############################################################################################################################################################################44578690876;Melissa Pereira;19/09/1993;melissa@gmail.com;15997654738;0000000000.00;;############################################################################################################################################################################
\echo index clientes_idx
[0] {14565436782, 0005}
[1]
[2]
[3]
[4]
[5] {23465784759, 0006}
[6]
[7]
[8]
[9] {79519734993, 0002}
[10]
[11] {44578690876, 0008}
[12]
[13]
[14]
[15]
[16]
[17]
[18]
[19] {64681295655, 0000}
[20] {37567876542, 0004}
[21] {95229543178, 0007}
[22] {02677449273, 0001}

-- removendo com colisão
DELETE FROM clientes WHERE cpf = '37567876542';
OK
\echo file ARQUIVO_CLIENTES
64681295655;Maria Eugenia;12/04/1980;mariaeugenia@gmail.com;15998765645;0000000000.00;;#########################################################################################################################################################################02677449273;Gabriel Augusto;04/05/1997;ga.augusto@gmail.com;15997675654;0000000000.00;;#########################################################################################################################################################################79519734993;Geovana Santana;25/10/1994;ge.santana@gmail.com;16996543652;0000000000.00;;#########################################################################################################################################################################*|197347759;Gustavo Almeida;19/11/1992;galmeida@gmail.com;14998786754;0000000000.00;;###########################################################################################################################################################################*|567876542;Melissa Santos;13/04/1977;melissa@gmail.com;15998765435;0000000000.00;;#############################################################################################################################################################################14565436782;Melissa Pereira;19/09/1993;melissa@gmail.com;15997654738;0000000000.00;;############################################################################################################################################################################23465784759;Jose Santos;03/07/1968;josesantos@gmail.com;14998786754;0000000018.00;;#############################################################################################################################################################################95229543178;Roberta Lima;17/04/1991;roberta91@gmail.com;11978876623;0000000018.00;;#############################################################################################################################################################################44578690876;Melissa Pereira;19/09/1993;melissa@gmail.com;15997654738;0000000000.00;;############################################################################################################################################################################
\echo index clientes_idx
[0] {14565436782, 0005}
[1]
[2]
[3]
[4]
[5] {23465784759, 0006}
[6]
[7]
[8]
[9] {79519734993, 0002}
[10]
[11] {44578690876, 0008}
[12]
[13]
[14]
[15]
[16]
[17]
[18]
[19] {64681295655, 0000}
[20] {DELETED}
[21] {95229543178, 0007}
[22] {02677449273, 0001}

VACUUM clientes;
OK
\echo file ARQUIVO_CLIENTES
64681295655;Maria Eugenia;12/04/1980;mariaeugenia@gmail.com;15998765645;0000000000.00;;#########################################################################################################################################################################02677449273;Gabriel Augusto;04/05/1997;ga.augusto@gmail.com;15997675654;0000000000.00;;#########################################################################################################################################################################79519734993;Geovana Santana;25/10/1994;ge.santana@gmail.com;16996543652;0000000000.00;;#########################################################################################################################################################################14565436782;Melissa Pereira;19/09/1993;melissa@gmail.com;15997654738;0000000000.00;;############################################################################################################################################################################23465784759;Jose Santos;03/07/1968;josesantos@gmail.com;14998786754;0000000018.00;;#############################################################################################################################################################################95229543178;Roberta Lima;17/04/1991;roberta91@gmail.com;11978876623;0000000018.00;;#############################################################################################################################################################################44578690876;Melissa Pereira;19/09/1993;melissa@gmail.com;15997654738;0000000000.00;;############################################################################################################################################################################
\echo index clientes_idx
[0] {14565436782, 0003}
[1]
[2]
[3]
[4]
[5] {23465784759, 0004}
[6]
[7]
[8]
[9] {79519734993, 0002}
[10]
[11] {44578690876, 0006}
[12]
[13]
[14]
[15]
[16]
[17]
[18]
[19] {64681295655, 0000}
[20] {95229543178, 0005}
[21]
[22] {02677449273, 0001}

\q
